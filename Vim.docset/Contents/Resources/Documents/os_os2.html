<HTML>
<HEAD>
<META HTTP-EQUIV="Content-type" content="text/html; charset=ISO-8859-1">
<TITLE>Vim documentation: os_os2</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<H1>Vim documentation: os_os2</H1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="os_os2.txt"></A><B>os_os2.txt</B>*    For Vim version 7.4.  Last change: 2007 Apr 22


		  VIM REFERENCE MANUAL    by Paul Slootman



							*<A NAME="os2"></A><B>os2</B>* *<A NAME="OS2"></A><B>OS2</B>* *<A NAME="OS/2"></A><B>OS/2</B>*
This file contains the particularities for the <A HREF="#OS/2">OS/2</A> version of Vim.

At present there is no native PM version of the <A HREF="gui.html#GUI">GUI</A> version of Vim: The <A HREF="#OS/2">OS/2</A>
version is a console application.  However, there is now a Win32s-compatible
<A HREF="gui.html#GUI">GUI</A> version, which should be usable by owners of Warp 4 (which supports
Win32s) in a Win-OS/2 session.  The notes in this file refer to the native
console version.


NOTE

This <A HREF="#OS/2">OS/2</A> port works well for me and a couple of other <A HREF="#OS/2">OS/2</A> users; however,
since I haven't had much feedback, that either means no (OS/2-specific) bugs
exist (besides the ones mentioned below), or no one has yet created a
situation in which any bugs are apparent.  File I/O in Dos and <A HREF="os_unix.html#Unix">Unix</A> mode,
binary mode, and FAT handling all seem to work well, which would seem to be
the most likely places for trouble.

A known problem is that files opened by Vim are inherited by other programs
that are started via a shell <A HREF="intro.html#escape">escape</A> from within Vim.  This specifically means
that Vim won't be able to remove the swap file(s) associated with <A HREF="windows.html#buffers">buffers</A> open
at the time the other program was started, until the other program is stopped.
At that time, the swap file may be removed, but if Vim could not <A HREF="diff.html#do">do</A> that the
first time, <A HREF="motion.html#it">it</A> won't be removed at all.  You'll get warnings that some other
Vim session may be editing the file when you start Vim up again on that file.
This can be reproduced with &quot;<A HREF="os_win32.html#:!start">:!start</A> epm&quot;.  Now quit Vim, and start Vim again
with the file that was in the buffer at the time epm was started.  I'm working
on this!

A second problem is that Vim doesn't understand the situation when using <A HREF="motion.html#it">it</A>
when accessing the <A HREF="#OS/2">OS/2</A> system via the <A HREF="pi_netrw.html#network">network</A>, e.g. using telnet from a <A HREF="os_unix.html#Unix">Unix</A>
system, and then starting Vim.  The problem seems to be that <A HREF="#OS/2">OS/2</A> =sometimes=
recognizes function / cursor keys, and tries to convert those to the
corresponding <A HREF="#OS/2">OS/2</A> codes generated by the &quot;normal&quot; PC keyboard.  I've been
testing a workaround (mapping the <A HREF="#OS/2">OS/2</A> codes to the correct functions), but so
far I can't say anything conclusive (this is on Warp 3, by the way).  In the
meantime any help will be appreciated.


PREREQUISITES

To run Vim, you need the emx runtime environment (at least rev. 0.9b).  This
is generally available <A HREF="motion.html#as">as</A> (ask Archie about it):

    emxrt.zip     emx runtime package

I've included a copy of emx.dll, which should be copied to one of the
directories listed in your LIBPATH.  Emx is GPL'ed, but the emx.dll library is
not (read COPYING.EMX to find out what that means to you).

This emx.dll is from the emxfix04.zip package, which unfortunately has a bug,
eh, I mean a POSIX feature, in select().  Versions of Vim before 3.27 will
appear to hang when starting (actually, while processing <A HREF="starting.html#vimrc">vimrc</A>).  Hit <A HREF="intro.html#&lt;Enter&gt;">&lt;Enter&gt;</A> a
couple of times until Vim starts working if this happens.  Next, get an up to
date version of Vim!


HELP AND VIMRC FILE

If you unpack the archive that Vim came in and run Vim directly from where <A HREF="motion.html#it">it</A>
was unpacked, Vim should be able to find the runtime files and your <A HREF="starting.html#.vimrc">.vimrc</A>
without any settings.

If you put the runtime files separately from the binary, the VIM environment
variable is used to find the location of the help files and the system <A HREF="starting.html#.vimrc">.vimrc</A>.
Place an entry such <A HREF="motion.html#as">as</A> this in CONFIG.SYS:

<B>  SET VIM=c:/local/lib/vim</B>

Put your <A HREF="starting.html#.vimrc">.vimrc</A> and your other Vim files in this directory.  Copy the runtime
directory to this directory.  Each version of Vim has its own runtime
directory.  It will be called something like &quot;c:/local/lib/vim/vim54&quot;.  Thus
you get a tree of Vim files like this:
	c:/local/lib/vim/.vimrc
	c:/local/lib/vim/vim54/filetype.vim
	c:/local/lib/vim/vim54/doc/help.txt
	etc.

Note: <A HREF="starting.html#.vimrc">.vimrc</A> may also be called <A HREF="starting.html#_vimrc">_vimrc</A> to accommodate those who have chosen to
<A HREF="usr_90.html#install">install</A> <A HREF="#OS/2">OS/2</A> on a FAT file system.  Vim first tries to find <A HREF="starting.html#.vimrc">.vimrc</A> and if that
fails, looks for <A HREF="starting.html#_vimrc">_vimrc</A> in the same place.  The existence of a <A HREF="starting.html#.vimrc">.vimrc</A> or
<A HREF="starting.html#_vimrc">_vimrc</A> file influences the <A HREF="options.html#'compatible'">'compatible'</A> <A HREF="options.html#options">options</A>, which can have unexpected side
effects.  See |<A HREF="options.html#'compatible'">'compatible'</A>|.

If you're using <A HREF="pi_netrw.html#network">network</A> drives with <A HREF="#OS/2">OS/2</A>, then you can <A HREF="usr_90.html#install">install</A> Vim on a
<A HREF="pi_netrw.html#network">network</A> drive (including <A HREF="starting.html#.vimrc">.vimrc</A>; this is then called the &quot;system&quot; <A HREF="starting.html#vimrc">vimrc</A> file),
and then use a personal copy of <A HREF="starting.html#.vimrc">.vimrc</A> (the &quot;user&quot; <A HREF="starting.html#vimrc">vimrc</A> file).  This should be
located in a directory indicated by the HOME environment variable.


ENVIRONMENT VARIABLES IN FILE NAMES

This HOME environment variable is also used when using ~ in file names, so
&quot;<A HREF="editing.html#:e">:e</A> ~/textfile&quot; will edit the file &quot;textfile&quot; in the directory referred to by
HOME.  Additionally you can use other environment <A HREF="eval.html#variables">variables</A> in file names, <A HREF="motion.html#as">as</A>
in &quot;<A HREF="editing.html#:n">:n</A> $SRC/*.c&quot;.

The HOME environment variable is also used to locate the .viminfo file
(see |<A HREF="starting.html#viminfo-file">viminfo-file</A>|).  There is no support yet for .viminfo on FAT file
systems yet, sorry.  You could try the <A HREF="starting.html#-i">-i</A> <A HREF="starting.html#startup">startup</A> flag (as in &quot;vim <A HREF="starting.html#-i">-i</A>
$HOME/_viminfo&quot;) however.

If the HOME environment variable is not set, the value &quot;C:/&quot; is used <A HREF="motion.html#as">as</A> a
default.


BACKSLASHES

Using slashes ('<A HREF="pattern.html#/">/</A>') and backslashes ('\') can be a bit of a problem (see
|<A HREF="os_dos.html#dos-backslash">dos-backslash</A>| for more explanation), but in almost all cases Vim does &quot;The
Right Thing&quot;.  Vim itself uses backslashes in file names, but will happily
accept forward slashes if they are entered (in fact, sometimes that works
better!).


TEMP FILES

Temporary files (for filtering) are put in the first directory in the next
list that exists and where a file can be created:
	$TMP
	$TEMP
	C:\TMP
	C:\TEMP
	current directory


TERMINAL SETTING


							*<A NAME="os2ansi"></A><B>os2ansi</B>*
Use &quot;<A HREF="#os2ansi">os2ansi</A>&quot; <A HREF="motion.html#as">as</A> the <A HREF="starting.html#TERM">TERM</A> environment variable (or don't set <A HREF="motion.html#it">it</A> at all, <A HREF="motion.html#as">as</A> the
default is the correct value).  You can set term to <A HREF="#os2ansi">os2ansi</A> in the <A HREF="starting.html#.vimrc">.vimrc</A>, in
<A HREF="change.html#case">case</A> you need <A HREF="starting.html#TERM">TERM</A> to be a different value for other applications.  The
problem is that <A HREF="#OS/2">OS/2</A> ANSI emulation is quite limited (it doesn't have insert /
delete line, for example).

If you want to use a different value for <A HREF="starting.html#TERM">TERM</A> (because of other programs, for
example), make sure that the <A HREF="term.html#termcap">termcap</A> entry for that <A HREF="starting.html#TERM">TERM</A> value has the
appropriate key mappings.  The termcap.dat distributed with emx does not always
have them.  Here are some suitable values to add to the <A HREF="term.html#termcap">termcap</A> entry of your
choice; these allow the cursor keys and the named function keys (such <A HREF="motion.html#as">as</A>
pagedown) to work.

	:ku=\316H:kd=\316P:kl=\316K:kr=\316M:&#37;i=\316t:#4=\316s:\
	:kD=\316S:kI=\316R:kN=\316Q:kP=\316I:kh=\316G:@7=\316O:\
	:k1=\316;:k2=\316&lt;:k3=\316=:k4=\316&gt;:k5=\316?:k6=\316@:\
	:k7=\316A:k8=\316B:k9=\316C:k;=\316D:


Paul Slootman


43 LINE WINDOW

A suggestion from Steven Tryon, on how to run Vim in a bigger <A HREF="windows.html#window">window</A>:

When I call Vim from an <A HREF="#OS/2">OS/2</A> WPS application such <A HREF="motion.html#as">as</A> PMMail <A HREF="motion.html#it">it</A> comes up
in the default 25-line mode.  To get a more useful <A HREF="windows.html#window">window</A> size I make
my external editor &quot;vimbig.cmd&quot; which in turn calls &quot;vimbig2.cmd&quot;.
Brute force and awkwardness, perhaps, but <A HREF="motion.html#it">it</A> works.

vimbig.cmd:
<B>   @echo off</B>
<B>   start "Vi Improved" /f vimbig2.cmd %1 %2 %3 %4</B>

vimbig2.cmd:
<B>   @echo off</B>
<B>   mode 80,43</B>
<B>   vim.exe %1 %2 %3 %4</B>
<B>   exit</B>
 

CLIPBOARD ACCESS (provided by Alexander Wagner)

Vim for <A HREF="#OS/2">OS/2</A> has no direct access to the system <A HREF="gui.html#clipboard">clipboard</A>.  To enable access
anyway you need an additional tool which gives you access to the <A HREF="gui.html#clipboard">clipboard</A>
from within a vio application.  The freeware package clipbrd.zip by Stefan
Gruendel can be used for this purpose.  You might <A HREF="intro.html#download">download</A> the package
including precompiled binaries and all sources from:
	<A HREF="http://www.os2site.com/sw/util/clipboard/index.html">http://www.os2site.com/sw/util/clipboard/index.html</A>
	<A HREF="http://download.uni-hd.de/ftp/pub/os2/pmtools/">http://download.uni-hd.de/ftp/pub/os2/pmtools/</A>

Installation of this package is straight forward: just put the two executables
that come with this package into a directory within your PATH for Vim should
be able to call them from whatever directory you are working.

To copy text from the <A HREF="gui.html#clipboard">clipboard</A> to your Vim session you can use the <A HREF="insert.html#:r">:r</A>
command.  Simply call clipbrd.exe from within Vim in the following way:

<B>	:r !clipbrd -r</B>

To copy text from Vim to the system <A HREF="gui.html#clipboard">clipboard</A> just <A HREF="motion.html#mark">mark</A> the text in the usual
vim-manner and call:

<B>	:!clipbrd -w</B>

which will write your selection right into OS/2's <A HREF="gui.html#clipboard">clipboard</A>.

For ease of use you might want to add some maps for these commands.  E.g. to
use F11 to paste the <A HREF="gui.html#clipboard">clipboard</A> into Vim and F12 to copy selected text to the
<A HREF="gui.html#clipboard">clipboard</A> you would use:

<B>	if has("os2")</B>
<B>	  imap &lt;F11&gt;     &lt;ESC&gt;:r !clipbrd -r&lt;CR&gt;i</B>
<B>	  vmap &lt;F12&gt;     :!clipbrd -w&lt;cr&gt;</B>
<B>	else</B>
<B>	  imap &lt;F11&gt;     &lt;ESC&gt;"*p&lt;CR&gt;i</B>
<B>	  vmap &lt;F12&gt;     "*y</B>
<B>	endif</B>

This will ensure that only on <A HREF="#OS/2">OS/2</A> clipbrd is called whereas on other
platforms vims build in mechanism is used.  (To enable this <A HREF="eval.html#functions">functions</A> on every
load of Vim place the above lines in your <A HREF="starting.html#.vimrc">.vimrc</A>.)

<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
</BODY>


</HTML>
